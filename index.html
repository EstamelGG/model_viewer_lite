<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Model Viewer</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
    <style>
        :root {
            --bg-gray: #ececec;
            --glass-bg: rgba(255, 255, 255, 0.4);
            --border-gap: 24px; /* 等距边框的宽度 */
            --radius: 32px;    /* 磨玻璃外圆角 */
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-gray);
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* 外层：磨玻璃边框容器 */
        .glass-frame {
            position: relative;
            width: calc(100% - 40px);
            height: calc(100% - 40px);
            max-width: 1200px;
            max-height: 800px;
            padding: var(--border-gap); /* 实现等距感 */
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: var(--radius);
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            display: flex;
        }

        /* 内层：模型展示区域，自带内圆角 */
        .inner-content {
            flex: 1;
            background: #fdfdfd; /* 纯净内底色 */
            border-radius: calc(var(--radius) - var(--border-gap)); /* 计算内圆角 */
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.02);
        }

        /* 上传引导区 */
        .upload-ui {
            text-align: center;
            z-index: 5;
            transition: transform 0.3s ease;
        }

        .upload-ui.dragover { transform: scale(1.05); }

        .btn-select {
            margin-top: 15px;
            padding: 10px 24px;
            border: none;
            background: #333;
            color: white;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.2s;
        }

        .btn-select:hover { opacity: 0.8; }

        .hint { color: #888; font-size: 16px; font-weight: 300; }

        /* Model Viewer 样式覆盖 */
        model-viewer {
            width: 100%;
            height: 100%;
            display: none;
            background-color: #f5f5f5; /* 内部渲染区域背景 */
        }

        model-viewer.active { display: block; }

        .file-input { display: none; }

        /* 悬浮信息条 */
        .info-tag {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.8);
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 11px;
            color: #666;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.5);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .info-tag.show { opacity: 1; }
    </style>
</head>
<body>

    <div class="glass-frame" id="dropZone">
        <div class="inner-content">
            <div class="upload-ui" id="uploadUI">
                <p class="hint">将 3D 模型拖入此区域</p>
                <button class="btn-select" onclick="document.getElementById('fileInput').click()">或者选择文件</button>
            </div>

            <model-viewer
                id="modelViewer"
                src=""
                camera-controls
                auto-rotate
                shadow-intensity="1"
                environment-image="neutral"
                exposure="1">
            </model-viewer>

            <div class="info-tag" id="infoTag"></div>
        </div>
    </div>

    <input type="file" id="fileInput" class="file-input" accept=".glb,.gltf">

    <script>
        const modelViewer = document.getElementById('modelViewer');
        const uploadUI = document.getElementById('uploadUI');
        const fileInput = document.getElementById('fileInput');
        const dropZone = document.getElementById('dropZone');
        const infoTag = document.getElementById('infoTag');
        let currentUrl = null;

        // 处理文件加载
        function handleFile(file) {
            if (!file.name.toLowerCase().endsWith('.glb') && !file.name.toLowerCase().endsWith('.gltf')) {
                alert('请上传 GLB 或 GLTF 格式');
                return;
            }

            if (currentUrl) URL.revokeObjectURL(currentUrl);
            currentUrl = URL.createObjectURL(file);

            modelViewer.src = currentUrl;
            modelViewer.classList.add('active');
            uploadUI.style.display = 'none';

            infoTag.textContent = `${file.name} | ${(file.size / (1024 * 1024)).toFixed(2)}MB`;
            infoTag.classList.add('show');
        }

        // 拖拽逻辑美化反馈
        ['dragover', 'dragleave', 'drop'].forEach(evt => {
            dropZone.addEventListener(evt, (e) => {
                e.preventDefault();
                e.stopPropagation();
            });
        });

        dropZone.addEventListener('dragover', () => uploadUI.classList.add('dragover'));
        dropZone.addEventListener('dragleave', () => uploadUI.classList.remove('dragover'));
        dropZone.addEventListener('drop', (e) => {
            uploadUI.classList.remove('dragover');
            handleFile(e.dataTransfer.files[0]);
        });

        fileInput.addEventListener('change', (e) => handleFile(e.target.files[0]));
    </script>
</body>
</html>